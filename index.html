<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>第一个网页</title>
	<link rel="stylesheet" href="./main.css">
	<script type="text/javascript" src="//at.alicdn.com/t/font_1137708_4mk1w3uugj7.js"></script>
    <style>
    .icon {width: 1em; height: 1em;vertical-align: -0.15em;fill: currentColor;overflow: hidden;}
	/*loading动画*/
    .siteWelcome{display: none;position: fixed;justify-content: center;align-items: center;background: white;z-index: 1;/*元素堆叠顺序*/
    	height: 100%;width: 100%;top:0;left: 0;}
    .siteWelcome.active{display: flex;}
	.loading{width:200px;height: 200px;position: relative;}
	.loading::before,.loading::after{content: '';position: absolute;background: #999;border-radius: 50%;width:0; height: 0;/*圆的初始宽高为0*/
	top:0;bottom: 0;left: 0;right: 0;margin:auto;animation:s 1s linear infinite; /*均速 循环*/}
	.loading::after{animation-delay: 0.5s;}
	@keyframes s{
	0%{width:0;height: 0;opacity: 1; /*透明度*/}
	100%{width:100px;height: 100px;opacity: 0;}
	}
	</style>
</head>

<body>
	<div id='siteWelcome' class='siteWelcome active'>
	<div class="loading"></div>
	</div>
		<div id="topNavBar" class="topNavBar">
		<div class="topNavBar-inner clearfix">
		<a class="logo" href="#" alt="logo" style="float: left;">
		<span class="rs">RS</span><span class="card">card</span>
		</a>
		<nav class="menu" style="float:right">
			<ul class="clearfix">
			<li><a  href="#siteAbout">关于</a></li>
			<li><a href="#siteSkills">技能</a></li>
			<li><a href="#siteWorks">作品</a>
				<ul class="submenu">
				<li>作品1</li>
				<li>作品2</li>
				<li>作品3</li>
				</ul>
			</li>
			<li><a href="#siteBlog">博客</a>
				<ul class="submenu">
				<li>博客1</li>
				<li>博客2</li>
				<li>博客3</li>
				</ul>
			</li>
			<li><a href="">联系我</a></li>
			</ul>

		</nav>	
		</div>
		</div>
<div class="banner"">
<div class="mask"></div>
</div>

<main date-x id="siteAbout">
<div class="userCard">
<div class="pictureAndText clearfix">
<div class="picture">
<img src="./img/avatar.jpg" alt="头像">
</div>

<div class="text">
<span class="welcome">hello
<span class="triangle"></span>
</span>
<h1>Yuki</h1>
<P>前端开发</P>
<hr>
<dl>
<dt>年龄</dt>
<dd>18岁</dd>
<dt>城市</dt>
<dd>北京</dd>
<dt>邮箱</dt>
<dd>yukiweng11@163.com</dd>
</dl>
</div>

</div>


<div>
<footer class="media">
<a href="#">
<svg class="icon" aria-hidden="true">
    <use xlink:href="#icon-wechat"></use>
</svg>
</a>
<a href="#">
<svg class="icon" aria-hidden="true">
    <use xlink:href="#icon-git"></use>
</svg>
</a>
<a href="#">
<svg class="icon" aria-hidden="true">
    <use xlink:href="#icon-jianshu"></use>
</svg>
</a>
</footer>
</div>

</div>
<p class="resume-wrapper">
<a class="resume" href="#">下载PDF简历</a>
</p>
<p class="selfIntroduction">
Yuki，学习前端ing<br>
加油鸭！
</p>
</main>
<section date-x id="siteSkills" class="skills">
<h2>技能</h2>
<ol class="clearfix">
	<li>
	<h3>HTML 5 &amp; CSS 3</h3>
	<div class="progressBar">
	<div class="progress"></div>
	</div>
	</li>
	<li>
	<h3>JavaScript</h3>
	<div class="progressBar">
	<div class="progress"></div>
	</li>
	<li>
	<h3>jQuery</h3>
	<div class="progressBar">
	<div class="progress"></div>
	</li>
	<li>
	<h3>Vue</h3>
	<div class="progressBar">
	<div class="progress"></div>
	</li>
	<li>
	<h3>React</h3>
	<div class="progressBar">
	<div class="progress"></div>
	</li>
	<li>
	<h3>HTTP</h3>
	<div class="progressBar">
	<div class="progress"></div>
	</li>
</ol>
</section>
<section date-x id="siteWorks" class="portfolio">
<h2>作品集</h2>
<nav>
<ol class="clearfix">
	<li id="portfolio1">所有</li>
	<li id="portfolio2">框架</li>
	<li id="portfolio3">原生JS&amp;CSS</li>
</ol>
<div id="portfolioBar" class="bar state-1">
	<div class="bar-inner">
	</div>
</div>
</nav>
	<script>
	portfolio1.onclick=function(){

		portfolioBar.className="bar state-1"
	}
	portfolio2.onclick=function(){
		portfolioBar.className="bar state-2"
	}
	portfolio3.onclick=function(){
		portfolioBar.className="bar state-3"
	}
	</script>

<div class="works">
<div class="big" style="top:0;left:0;">
<img src="./img/1.jpg" alt="作品1">
</div>
<div class="small" style="top:0;left:645px;">
<img src="./img/2.jpg" alt="作品2">
</div>
<div class="small" style="top:312px;left:645px;">
<img src="./img/3.jpg" alt="作品3">
</div>
</div>
</section>



</div>
</div>

 <script src="https://cdnjs.cloudflare.com/ajax/libs/tween.js/17.1.1/Tween.min.js"></script>

<script>

setTimeout(function(){
siteWelcome.classList.remove('active') // 改变loading动画class
},1000) // 1.5秒后执行function

let specialTags=document.querySelectorAll('[date-x]')
for(let i=0;i<specialTags.length;i++){
	specialTags[i].classList.add('offset')
}

window.onscroll=function(){
	if(window.scrollY>0){
		topNavBar.classList.add('sticky')
	}else{
		topNavBar.classList.remove('sticky')
	}

	let specialTags=document.querySelectorAll('[date-x]')
	let minIndex=0
	for(let i=1;i<specialTags.length;i++){
		if(Math.abs(specialTags[i].offsetTop-window.scrollY)<Math.abs(specialTags[minIndex].offsetTop-window.scrollY)){
			minIndex=i
		}
	}
	specialTags[minIndex].classList.remove('offset')

	let id=specialTags[minIndex].id
	let a=document.querySelector('a[href="#'+id+'"]')
	let li=a.parentNode
	let allLi=li.parentNode.children
	for(let i=0;i<allLi.length;i++){
		allLi[i].classList.remove('highlight')
	}
	li.classList.add('highlight')

}

// let liTags =document.getElementsByClassName('menuTigger') //通过class获取li标签
let liTags=document.querySelectorAll('nav.menu>ul>li')
for(let i=0;i<liTags.length;i++){ //遍历li标签的classname
	liTags[i].onmouseenter=function(x){ //鼠标移动到元素上时触发
		x.currentTarget.classList.add('active')
	}
	liTags[i].onmouseleave=function(x){ //鼠标移出元素时触发
		x.currentTarget.classList.remove('active')
	}
}

let aTags=document.querySelectorAll('nav.menu>ul>li>a')
function animate(time){
	requestAnimationFrame(animate)
	TWEEN.update(time)
}

requestAnimationFrame(animate)


for(let i=0;i<aTags.length;i++){
	aTags[i].onclick=function(x){
		x.preventDefault()//阻止默认动作
		let a=x.currentTarget
		let href=a.getAttribute('href')
		let element=document.querySelector(href)
		let top=element.offsetTop
		
		let currentTop=window.scrollY  //已滚动的距离
		let targetTop= top-80 // 目标距离
		let s=targetTop-currentTop

		var coords={y:currentTop}
		var t=Math.abs((s/100)*300) 
		if (t>500) {t=500}
		var tween = new TWEEN.Tween(coords) // 起始位置
      		.to({ y: targetTop}, t) // 结束位置 和 时间
     		.easing(TWEEN.Easing.Quadratic.InOut) // 缓动类型
      		.onUpdate(function() {
        	// coords.y 已经变了
        	window.scrollTo(0,coords.y) // 如何更新界面
      		})
      		.start(); // 开始缓动		
	}
}

</script>

</body>
</html>